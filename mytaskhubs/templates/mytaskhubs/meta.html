{% extends "mytaskhubs/base.html" %}

{% block content %}
  <h2>{{ meta.title }}</h2>
  <p>{{ meta.description }}</p>
  <p><strong>Prazo final:</strong> {{ meta.duration|date:"d/m/Y H:i" }}</p>

  <!-- Formulário para marcar tarefas como concluídas -->
  <form method="post" action="{% url 'meta' meta.id %}">
    {% csrf_token %}
    <ul style="list-style: none; padding: 0;">
      {% for task in meta.tasks.all %}
        <li style="margin-bottom: 8px;">
          <label>
            <input type="checkbox" name="task_{{ task.id }}" {% if task.completed %}checked{% endif %} onchange="this.form.submit()">
            {{ task.title }}
          </label>
        </li>
      {% empty %}
        <li>Sem tarefas ainda.</li>
      {% endfor %}
    </ul>
  </form>
    <h4>Progresso:</h4>
  <div style="margin-bottom: 10px;">
    <progress value="{{ meta.progress }}" max="100" style="width: 100%; height: 20px;"></progress>
    <p>{{ meta.progress }}% concluído</p>
  </div>
<a href="{% url 'add_task_to_meta' meta.id %}">Adicionar nova task</a>



{% endblock %}
